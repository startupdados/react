import{a2 as p,C as g,B as o,j as t,T as r,a4 as h,r as x,af as u}from"./index-abcHMAUO.js";import{d as f,C as j}from"./Search-j-ETTPZQ.js";import{T as m}from"./TextField-QOU9EbB3.js";import{I as y}from"./InputAdornment-CXn_n6Xw.js";import"./OutlinedInput-CG80is10.js";const C=p(g)(({theme:e})=>({backgroundColor:"#fff",borderRadius:"12px",padding:e.spacing(2),display:"flex",flexDirection:"column",justifyContent:"space-between",width:"300px",textAlign:"center"})),v=p(o)(({theme:e})=>({backgroundColor:e.palette.secondary.main,color:e.palette.secondary.light,padding:e.spacing(2),borderRadius:"8px"})),w=({client:e})=>{const{id:n,initials:c,fullName:l,qtdServidores:s,dataRegistro:i,dataUltimaAtualizacao:d,status:a}=e;return console.log("Card"),console.log(e),t.jsxs(C,{children:[t.jsxs(v,{children:[t.jsxs(r,{variant:"h6",gutterBottom:!0,color:"secondary.light",children:["ID: ",n]}),t.jsx(r,{variant:"h3",gutterBottom:!0,color:"secondary.light",children:c}),t.jsx(r,{variant:"subtitle1",color:"secondary.light",children:l})]}),t.jsxs(o,{sx:{marginTop:2},children:[t.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:3},children:[t.jsxs(o,{sx:{flexGrow:1,textAlign:"center"},children:[t.jsx(r,{variant:"body2",color:"textSecondary",children:"Qtd Servidor"}),t.jsx(r,{variant:"h5",color:"secondary.dark",children:s})]}),t.jsxs(o,{sx:{flexGrow:1,textAlign:"center"},children:[t.jsx(r,{variant:"body2",color:"textSecondary",children:"Data Registro"}),t.jsx(r,{variant:"h5",color:"secondary.dark",children:i})]}),t.jsxs(o,{sx:{flexGrow:1,textAlign:"center"},children:[t.jsx(r,{variant:"body2",color:"textSecondary",children:"Última Atualização"}),t.jsx(r,{variant:"h5",color:"secondary.dark",children:d})]})]}),t.jsx(o,{sx:{display:"flex",justifyContent:"flex-end"},children:t.jsx(h,{label:a==="ATIVADO"?"Ativado":"Desativado",sx:{backgroundColor:a==="ATIVADO"?"success.dark":"warning.dark",color:"white",fontWeight:"bold"}})})]})]})},A=({clients:e})=>{const[n,c]=x.useState(""),l=e.filter(s=>{var i,d;return((i=s.fullName)==null?void 0:i.toLowerCase().includes(n.toLowerCase()))||((d=s.initials)==null?void 0:d.toLowerCase().includes(n.toLowerCase()))});return t.jsxs(o,{children:[t.jsx(m,{placeholder:"Filtrar por nome ou sigla",variant:"outlined",value:n,onChange:s=>c(s.target.value),InputProps:{startAdornment:t.jsx(y,{position:"start",children:t.jsx(f,{})})},fullWidth:!0,sx:{marginBottom:"20px"}}),t.jsx(o,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:2},children:l.map(s=>t.jsx(w,{client:s},s.id))})]})},S={getAllClients:async()=>await u.get("/clients"),getClientById:async e=>await u.get(`/clients/${e}`)},k=()=>{const[e,n]=x.useState([]),[c,l]=x.useState(!0),s=async()=>{l(!0);try{const d=(await S.getAllClients()).map(a=>({id:a.id,initials:a.sigla,fullName:a.nome,qtdServidores:a.quantidadeServidores,dataRegistro:new Date(a.dataRegistro).toLocaleDateString("pt-BR"),dataUltimaAtualizacao:new Date(a.dataSituacaoAtualizada).toLocaleDateString("pt-BR"),status:a.status}));n(d)}catch(i){console.error("Erro ao buscar clientes:",i)}finally{l(!1)}};return x.useEffect(()=>{s()},[]),t.jsxs("div",{children:[t.jsx(r,{variant:"h1",sx:{fontSize:"32px",fontWeight:"bold",marginBottom:"20px"},children:"Clientes"}),c?t.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:t.jsx(j,{})}):t.jsx(A,{clients:e})]})};export{k as default};
